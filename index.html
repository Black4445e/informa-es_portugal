<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Free Fire SERVICOS</title>
  <style>
    :root{--bg:#000;--accent:#00ff66;--muted:#8fffd9}
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:#03060a;color:var(--muted);font-family:ui-monospace,monospace;display:flex;align-items:center;justify-content:center;padding:20px}
    .card{width:520px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:18px;border-radius:10px;border:1px solid rgba(0,255,102,0.06)}
    h1{margin:0 0 8px 0;color:var(--accent);font-size:18px}
    label{display:block;font-size:12px;color:#9fffd1;margin-top:10px}
    input,select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(0,255,102,0.06);background:transparent;color:var(--muted);font-family:inherit}
    .row{display:flex;gap:8px;margin-top:12px}
    button{flex:1;padding:10px;border-radius:8px;border:1px solid rgba(0,255,102,0.12);background:transparent;color:var(--accent);cursor:pointer}
    pre{background:#001214;padding:10px;border-radius:8px;margin-top:12px;max-height:220px;overflow:auto;border:1px dashed rgba(0,255,102,0.04);color:#bfffe6}
    .small{font-size:12px;color:#86ffd0;margin-top:8px}
  </style>
</head>
<body>
  <div class="card">
    <h1>FREE FIRE</h1>

    <label for="uid">UID</label>
    <input id="uid" placeholder="ex: 9211319283" value="9211319283">

    <label for="server">Server</label>
    <select id="server">
      <option value="BR">BR</option>
      <option value="NA">MANUTENÇÃO</option>
      <option value="EU">MANUTENÇÃO</option>
      <option value="AS">MANUTENÇÃO</option>
    </select>

    <div class="row">
      <button id="btnSend">Enviar Pedidos</button>
      <button id="btnLike">Enviar like</button>
    </div>

    <div class="small">Resposta </code></div>
    <pre id="output">— sem resposta —</pre>
  </div>

  <script>
    const uidEl = document.getElementById('uid');
    const serverEl = document.getElementById('server');
    const out = document.getElementById('output');
    const base = 'https://free-fire-bot-ten.vercel.app';

    function buildUrl(path){
      const uid = encodeURIComponent((uidEl.value||'').trim());
      const server = encodeURIComponent((serverEl.value||'BR').trim());
      return `${base}/${path}?uid=${uid}&server=${server}`;
    }

    function sanitize(obj){
      try{
        if (obj && typeof obj === 'object'){
          const copy = JSON.parse(JSON.stringify(obj));
          if (copy.credits) delete copy.credits;
          if (copy.creditos) delete copy.creditos;
          return copy;
        }
      }catch(e){}
      return obj;
    }

    async function tryFetchOrOpen(url){
      out.textContent = 'Enviando (fetch GET)...';
      try{
        const res = await fetch(url, { method: 'GET', cache: 'no-store' });
        const contentType = res.headers.get('content-type') || '';
        let data;
        if (contentType.includes('application/json')){
          data = await res.json();
          data = sanitize(data);
          out.textContent = JSON.stringify(data, null, 2);
        } else {
          const text = await res.text();
          try {
            const parsed = JSON.parse(text);
            out.textContent = JSON.stringify(sanitize(parsed), null, 2);
          } catch(e){
            out.textContent = text.slice(0, 2000) || '[resposta vazia]';
          }
        }
        out.textContent = 'Status: ' + res.status + ' ' + res.statusText + '\n\n' + out.textContent;
      }catch(err){
        // provável CORS ou rede — fallback: abrir em nova aba
        out.textContent = 'Erro no fetch (provável CORS ou rede). Abrindo em nova aba como fallback.\n\n' + String(err);
        window.open(url, '_blank');
      }
    }

    document.getElementById('btnSend').addEventListener('click', ()=>{
      const url = buildUrl('send_requests');
      tryFetchOrOpen(url);
    });

    document.getElementById('btnLike').addEventListener('click', ()=>{
      const url = buildUrl('like');
      tryFetchOrOpen(url);
    });
  </script>
</body>
    </html>
